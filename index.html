<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>浅蓝+原木色+薄荷绿主题 - 数据可视化交互网站</title>
    <link rel="stylesheet" href="style-blue-green.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-title">🎨 数据可视化交互网站</div>
            <ul class="nav-links">
                <li><a href="#home">首页</a></li>
                <li><a href="#chapter5">第五章</a></li>
                <li><a href="#chapter6">第六章</a></li>
                <li><a href="#interactive">交互功能</a></li>
                <li><a href="#about">关于</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <!-- 首页横幅 -->
        <section id="home">
            <div class="card" style="text-align: center; padding: 3rem;">
                <h1 style="font-size: 3rem; margin-bottom: 1rem;">
                    🌊 <span style="background: linear-gradient(45deg, var(--dark-blue), var(--dark-mint)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">浅蓝</span> + <span style="background: linear-gradient(45deg, var(--dark-wood), var(--medium-wood)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">原木色</span> + <span style="background: linear-gradient(45deg, var(--dark-mint), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">薄荷绿</span> 🌿
                </h1>
                <p style="font-size: 1.3rem; color: var(--text-secondary); margin-bottom: 2rem;">
                    基于 Matplotlib 第五、六章的交互式数据可视化网站
                </p>
                <div style="display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap;">
                    <a href="#chapter5" class="btn btn-primary">📊 第五章 - 子图绘制</a>
                    <a href="#chapter6" class="btn btn-secondary">📐 第六章 - 坐标轴定制</a>
                    <a href="#interactive" class="btn btn-wood">🎮 交互体验</a>
                </div>
            </div>
        </section>

        <!-- 统计概览 -->
        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-number">2</div>
                <div class="stat-label">章节内容</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">12+</div>
                <div class="stat-label">可视化实例</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">50+</div>
                <div class="stat-label">交互选项</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">3</div>
                <div class="stat-label">主题配色</div>
            </div>
        </div>

        <!-- 第五章部分 -->
        <section id="chapter5">
            <div class="card">
                <h2>📊 第五章：子图绘制与布局</h2>
                <p>基于Matplotlib第五章的子图绘制实例，包括固定区域、自定义区域、共享坐标轴和布局管理。</p>
                
                <div class="tabs">
                    <button class="tab active" onclick="showTab('ch5-sales')">销售分析</button>
                    <button class="tab" onclick="showTab('ch5-demographics')">人口统计</button>
                    <button class="tab" onclick="showTab('ch5-weather')">气象数据</button>
                    <button class="tab" onclick="showTab('ch5-automotive')">汽车销量</button>
                </div>

                <!-- 销售分析 -->
                <div id="ch5-sales" class="tab-content active">
                    <div class="controls">
                        <h3>⚙️ 数据筛选</h3>
                        <div class="control-group">
                            <label>数据类型：</label>
                            <select id="salesDataType" onchange="updateSalesData()">
                                <option value="both">产品A + 产品B</option>
                                <option value="productA">仅产品A</option>
                                <option value="productB">仅产品B</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>图表类型：</label>
                            <select id="salesChartType" onchange="updateSalesData()">
                                <option value="line">折线图</option>
                                <option value="bar">柱状图</option>
                                <option value="radar">雷达图</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>时间范围：</label>
                            <select id="salesTimeRange" onchange="updateSalesData()">
                                <option value="all">全年</option>
                                <option value="q1">第一季度</option>
                                <option value="q2">第二季度</option>
                                <option value="q3">第三季度</option>
                                <option value="q4">第四季度</option>
                            </select>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="salesChart"></canvas>
                    </div>
                </div>

                <!-- 人口统计 -->
                <div id="ch5-demographics" class="tab-content">
                    <div class="controls">
                        <h3>⚙️ 地区筛选</h3>
                        <div class="control-group">
                            <label>选择国家：</label>
                            <select id="countryFilter" multiple onchange="updateDemographicsData()" style="height: 120px;">
                                <option value="china" selected>中国</option>
                                <option value="canada">加拿大</option>
                                <option value="brazil">巴西</option>
                                <option value="australia">澳大利亚</option>
                                <option value="japan">日本</option>
                                <option value="mexico">墨西哥</option>
                                <option value="russia">俄罗斯</option>
                                <option value="korea">韩国</option>
                                <option value="switzerland">瑞士</option>
                                <option value="turkey">土耳其</option>
                                <option value="uk">英国</option>
                                <option value="usa">美国</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>宠物类型：</label>
                            <select id="petType" onchange="updateDemographicsData()">
                                <option value="both">养猫 + 养狗</option>
                                <option value="cats">仅养猫</option>
                                <option value="dogs">仅养狗</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>排序方式：</label>
                            <select id="sortOrder" onchange="updateDemographicsData()">
                                <option value="name">按名称</option>
                                <option value="cats">按养猫比例</option>
                                <option value="dogs">按养狗比例</option>
                                <option value="total">按总和</option>
                            </select>
                        </div>
                    </div>
                    <div class="axis-demo">
                        <div class="chart-container">
                            <canvas id="catChart"></canvas>
                        </div>
                        <div class="chart-container">
                            <canvas id="dogChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- 气象数据 -->
                <div id="ch5-weather" class="tab-content">
                    <div class="controls">
                        <h3>⚙️ 气象数据筛选</h3>
                        <div class="control-group">
                            <label>季度选择：</label>
                            <select id="seasonFilter" onchange="updateWeatherData()">
                                <option value="all">全年</option>
                                <option value="spring">春季 (3-5月)</option>
                                <option value="summer">夏季 (6-8月)</option>
                                <option value="autumn">秋季 (9-11月)</option>
                                <option value="winter">冬季 (12-2月)</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>数据类型：</label>
                            <label><input type="checkbox" id="showTemp" checked onchange="updateWeatherData()"> 气温</label>
                            <label><input type="checkbox" id="showPrecipitation" checked onchange="updateWeatherData()"> 降水量</label>
                            <label><input type="checkbox" id="showEvaporation" checked onchange="updateWeatherData()"> 蒸发量</label>
                        </div>
                        <div class="control-group">
                            <label>温度单位：</label>
                            <select id="tempUnit" onchange="updateWeatherData()">
                                <option value="celsius">摄氏度 (°C)</option>
                                <option value="fahrenheit">华氏度 (°F)</option>
                            </select>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="weatherChart"></canvas>
                    </div>
                </div>

                <!-- 汽车销量 -->
                <div id="ch5-automotive" class="tab-content">
                    <div class="controls">
                        <h3>⚙️ 汽车数据筛选</h3>
                        <div class="control-group">
                            <label>月份范围：</label>
                            <select id="monthRange" onchange="updateAutomotiveData()">
                                <option value="all">上半年 (1-6月)</option>
                                <option value="q1">第一季度 (1-3月)</option>
                                <option value="q2">第二季度 (4-6月)</option>
                                <option value="custom">自定义</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>城市选择：</label>
                            <select id="cityFilter" multiple onchange="updateAutomotiveData()" style="height: 120px;">
                                <option value="beijing" selected>北京</option>
                                <option value="shanghai" selected>上海</option>
                                <option value="guangzhou" selected>广州</option>
                                <option value="shenzhen" selected>深圳</option>
                                <option value="zhejiang">浙江</option>
                                <option value="shandong">山东</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>显示方式：</label>
                            <select id="automotiveDisplay" onchange="updateAutomotiveData()">
                                <option value="monthly">月度销售额</option>
                                <option value="city">城市销量对比</option>
                                <option value="area">面积图</option>
                                <option value="comparison">综合对比</option>
                            </select>
                        </div>
                    </div>
                    <div class="axis-demo">
                        <div class="chart-container">
                            <canvas id="carSalesChart"></canvas>
                        </div>
                        <div class="chart-container">
                            <canvas id="carCityChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 第六章部分 -->
        <section id="chapter6">
            <div class="card">
                <h2>📐 第六章：坐标轴定制与优化</h2>
                <p>基于Matplotlib第六章的坐标轴定制实例，包括刻度定制、轴脊控制、位置调整和样式优化。</p>
                
                <div style="text-align: center; margin: 2rem 0;">
                    <a href="chapter6-interactive.html" class="btn btn-primary" style="font-size: 1.1rem; padding: 1rem 2rem;">
                        🎮 体验完整的坐标轴交互功能
                    </a>
                </div>

                <!-- 快速预览 -->
                <div class="axis-demo">
                    <div class="chart-container">
                        <canvas id="windSpeedPreview"></canvas>
                    </div>
                    <div class="chart-container">
                        <canvas id="trigPreview"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- 交互功能展示 -->
        <section id="interactive">
            <div class="card">
                <h2>🎮 交互功能展示</h2>
                <p>本网站提供的丰富交互功能，让数据可视化更加生动和实用。</p>
                
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-number">📊</div>
                        <div class="stat-label">动态图表切换</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">🔍</div>
                        <div class="stat-label">实时数据筛选</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">📥</div>
                        <div class="stat-label">图表导出功能</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">🎨</div>
                        <div class="stat-label">主题定制</div>
                    </div>
                </div>

                <div class="controls">
                    <h3>🛠️ 全局控制</h3>
                    <div class="control-group">
                        <label>全局主题：</label>
                        <select id="globalTheme" onchange="updateGlobalTheme()">
                            <option value="blue-green">浅蓝+原木色+薄荷绿</option>
                            <option value="warm-yellow">低饱和暖米黄色</option>
                            <option value="ocean">海洋蓝</option>
                            <option value="forest">森林绿</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>动画速度：</label>
                        <select id="animationSpeed" onchange="updateAnimationSpeed()">
                            <option value="0">无动画</option>
                            <option value="500">快速</option>
                            <option value="1000" selected>正常</option>
                            <option value="2000">缓慢</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <button class="btn btn-primary" onclick="exportAllCharts()">📥 导出所有图表</button>
                        <button class="btn btn-secondary" onclick="randomizeAllData()">🎲 随机化数据</button>
                        <button class="btn btn-wood" onclick="resetAllSettings()">🔄 重置设置</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- 关于部分 -->
        <section id="about">
            <div class="card">
                <h2>📖 关于项目</h2>
                <p>这是一个基于Matplotlib教程第五、六章内容开发的交互式数据可视化网站。</p>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin: 2rem 0;">
                    <div>
                        <h3>🎨 设计理念</h3>
                        <p>采用浅蓝+原木色+薄荷绿的清新配色方案，营造自然、舒适的视觉体验。低饱和度的色彩搭配确保长时间使用不会造成视觉疲劳。</p>
                    </div>
                    <div>
                        <h3>🛠️ 技术栈</h3>
                        <p>• HTML5 + CSS3 响应式设计<br>
                           • Chart.js 图表库<br>
                           • 原生JavaScript交互逻辑<br>
                           • 基于Matplotlib实例的数据重构</p>
                    </div>
                    <div>
                        <h3>📚 数据来源</h3>
                        <p>所有可视化实例均基于《Matplotlib数据可视化》教程第五、六章的示例数据进行重新实现和增强。</p>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 2rem;">
                    <p style="color: var(--text-secondary);">
                        Made with ❤️ using 浅蓝+原木色+薄荷绿 theme<br>
                        © 2024 数据可视化交互网站
                    </p>
                </div>
            </div>
        </section>
    </div>

    <footer>
        <p>🌊 浅蓝+原木色+薄荷绿主题 | 基于Matplotlib第五、六章的交互式数据可视化网站</p>
    </footer>

    <script src="charts.js"></script>
    <script src="chapter6-charts.js"></script>
    <script>
        // 全局变量存储所有图表实例
        let globalCharts = {};

        // 初始化所有图表
        function initializeAllCharts() {
            console.log('🚀 初始化所有交互图表...');
            
            // 初始化第五章图表
            if (typeof createProductSalesChart === 'function') {
                createProductSalesChart();
                globalCharts.sales = window.productSalesChart;
            }
            
            if (typeof createCatOwnershipChart === 'function') {
                createCatOwnershipChart();
                globalCharts.cats = window.catChart;
            }
            
            if (typeof createDogOwnershipChart === 'function') {
                createDogOwnershipChart();
                globalCharts.dogs = window.dogChart;
            }
            
            if (typeof createWeatherChart === 'function') {
                createWeatherChart();
                globalCharts.weather = window.weatherChart;
            }
            
            if (typeof createCarMonthlySalesChart === 'function') {
                createCarMonthlySalesChart();
                globalCharts.carSales = window.carSalesChart;
            }
            
            // 初始化第六章预览图表
            createChapter6Previews();
            
            console.log('✅ 所有图表初始化完成');
        }

        // 创建第六章预览图表
        function createChapter6Previews() {
            // 风速预览
            const windCtx = document.getElementById('windSpeedPreview');
            if (windCtx) {
                globalCharts.windPreview = new Chart(windCtx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '24:00'],
                        datasets: [{
                            label: '风速预览',
                            data: [7, 11, 8, 22, 10, 11, 8],
                            borderColor: '#1976D2',
                            backgroundColor: '#E3F2FD40',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: '深圳市风速预览'
                            }
                        }
                    }
                });
            }

            // 三角函数预览
            const trigCtx = document.getElementById('trigPreview');
            if (trigCtx) {
                const x = [];
                const sin = [];
                for (let i = 0; i < 50; i++) {
                    const val = -2*Math.PI + 4*Math.PI*i/49;
                    x.push(val);
                    sin.push(Math.sin(val));
                }
                
                globalCharts.trigPreview = new Chart(trigCtx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: x,
                        datasets: [{
                            label: 'sin(x)',
                            data: sin,
                            borderColor: '#00897B',
                            tension: 0.4,
                            pointRadius: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: '正弦函数预览'
                            }
                        }
                    }
                });
            }
        }

        // 标签页切换功能
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            const selectedTab = document.getElementById(tabName);
            if (selectedTab) {
                selectedTab.classList.add('active');
            }
            
            const tabButtons = document.querySelectorAll('.tab');
            tabButtons.forEach(button => button.classList.remove('active'));
            
            if (event && event.target) {
                event.target.classList.add('active');
            }
        }

        // 更新销售数据
        function updateSalesData() {
            const dataType = document.getElementById('salesDataType').value;
            const chartType = document.getElementById('salesChartType').value;
            const timeRange = document.getElementById('salesTimeRange').value;
            
            console.log('更新销售数据:', { dataType, chartType, timeRange });
            
            // 这里可以实现具体的数据更新逻辑
            if (globalCharts.sales) {
                // 根据筛选条件更新图表
                globalCharts.sales.update();
            }
        }

        // 更新人口统计数据
        function updateDemographicsData() {
            const countryFilter = Array.from(document.getElementById('countryFilter').selectedOptions)
                .map(option => option.value);
            const petType = document.getElementById('petType').value;
            const sortOrder = document.getElementById('sortOrder').value;
            
            console.log('更新人口统计数据:', { countryFilter, petType, sortOrder });
            
            if (globalCharts.cats) globalCharts.cats.update();
            if (globalCharts.dogs) globalCharts.dogs.update();
        }

        // 更新气象数据
        function updateWeatherData() {
            const season = document.getElementById('seasonFilter').value;
            const showTemp = document.getElementById('showTemp').checked;
            const showPrecipitation = document.getElementById('showPrecipitation').checked;
            const showEvaporation = document.getElementById('showEvaporation').checked;
            const tempUnit = document.getElementById('tempUnit').value;
            
            console.log('更新气象数据:', { season, showTemp, showPrecipitation, showEvaporation, tempUnit });
            
            if (globalCharts.weather) globalCharts.weather.update();
        }

        // 更新汽车数据
        function updateAutomotiveData() {
            const monthRange = document.getElementById('monthRange').value;
            const cityFilter = Array.from(document.getElementById('cityFilter').selectedOptions)
                .map(option => option.value);
            const display = document.getElementById('automotiveDisplay').value;
            
            console.log('更新汽车数据:', { monthRange, cityFilter, display });
            
            if (globalCharts.carSales) globalCharts.carSales.update();
            if (globalCharts.carCity) globalCharts.carCity.update();
        }

        // 更新全局主题
        function updateGlobalTheme() {
            const theme = document.getElementById('globalTheme').value;
            console.log('切换全局主题:', theme);
            
            // 这里可以实现主题切换逻辑
            document.body.className = theme;
        }

        // 更新动画速度
        function updateAnimationSpeed() {
            const speed = parseInt(document.getElementById('animationSpeed').value);
            console.log('更新动画速度:', speed);
            
            // 更新所有图表的动画速度
            Object.values(globalCharts).forEach(chart => {
                if (chart && chart.options) {
                    chart.options.animation.duration = speed;
                    chart.update();
                }
            });
        }

        // 导出所有图表
        function exportAllCharts() {
            Object.entries(globalCharts).forEach(([name, chart]) => {
                if (chart) {
                    const url = chart.toBase64Image();
                    const link = document.createElement('a');
                    link.download = `chart-${name}-${Date.now()}.png`;
                    link.href = url;
                    link.click();
                }
            });
            console.log('📥 所有图表已导出');
        }

        // 随机化所有数据
        function randomizeAllData() {
            Object.values(globalCharts).forEach(chart => {
                if (chart && chart.data && chart.data.datasets) {
                    chart.data.datasets.forEach(dataset => {
                        if (dataset.data) {
                            dataset.data = dataset.data.map(() => Math.random() * 100);
                        }
                    });
                    chart.update();
                }
            });
            console.log('🎲 所有数据已随机化');
        }

        // 重置所有设置
        function resetAllSettings() {
            document.getElementById('globalTheme').value = 'blue-green';
            document.getElementById('animationSpeed').value = '1000';
            
            // 重置第五章筛选器
            document.getElementById('salesDataType').value = 'both';
            document.getElementById('salesChartType').value = 'line';
            document.getElementById('salesTimeRange').value = 'all';
            
            // 更新主题
            updateGlobalTheme();
            updateAnimationSpeed();
            
            // 重新初始化图表
            initializeAllCharts();
            
            console.log('🔄 所有设置已重置');
        }

        // 平滑滚动
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🎨 浅蓝+原木色+薄荷绿主题网站加载完成');
            initializeAllCharts();
        });
    </script>
</body>
</html>